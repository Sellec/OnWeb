////////////////////////////////////////////
//                                        //
//              Countdown                 //
//                 v3.1                   //
//            Feb. 19, 2014               //    
//             by mike gieson             //
//             www.gieson.com             //
//         Copyright Mike Gieson          //
//                                        //
////////////////////////////////////////////


// Usage:
// var test = new Countdown({time:15});

var CountdownImageFolder = "/data/js/cdown/images/";
var CountdownImageBasename = "flipper";
var CountdownImageExt = "png";
var CountdownImagePhysicalWidth = 41;
var CountdownImagePhysicalHeight = 60;

var CountdownWidth = 200;
var CountdownHeight = 30;

var CountdownLabels = {
	second 	: "Сек",
	minute 	: "Мин",
	hour	: "Час",
	day 	: "Дни",
	month 	: "Мес",
	year 	: "Год"	
};


////////////////////////////////////////////
//                                        //
//                 jbeeb                  //
//         version 0.0.0.3 alpha          //
//            by mike gieson              //
//             www.jbeeb.com              //
//          Copyright Mike Gieson         //
//                                        //
////////////////////////////////////////////

if(!Array.prototype.indexOf)Array.prototype.indexOf=function(d){if(this==null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(a===0)return-1;var g=0;arguments.length>1&&(g=Number(arguments[1]),g!=g?g=0:g!=0&&g!=Infinity&&g!= -Infinity&&(g=(g>0|| -1)*Math.floor(Math.abs(g))));if(g>=a)return-1;for(g=g>=0?g:Math.max(a-Math.abs(g),0);g<a;g++)if(g in b&&b[g]===d)return g;return-1};if(!Function.prototype.bind)Function.prototype.bind=function(d){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),a=this,g=function(){},c=function(){return a.apply(this instanceof g&&d?this:d,b.concat(Array.prototype.slice.call(arguments)))};g.prototype=this.prototype;c.prototype=new g;return c};this.jbeeb=this.jbeeb||{};(function(){var d=function(){},b=Object.prototype.toString,a=String.prototype.trim;d.link=function(a,c,b){var b=b||{},c=c||"_blank",f=[],h;for(h in b)h=h.toLowerCase(),h=="width"||h=="height"||h=="left"?f.push(h+"="+b[h]):(h=="location"||h=="menubar"||h=="resizable"||h=="scrollbars"||h=="status"||h=="titlebar"||h=="toolbar")&&f.push(h+"=1");b=null;f.length>0&&(b=f.join(","));window.open(a,c,b)};d.isArray=function(a){return Array.isArray?Array.isArray(a):b.call(a)==="[object Array]"};d.isEmpty=function(a){var b=typeof a;if(b=="undefined")return true;if(a===null)return true;else if(b=="object"){if(a=={}||a==[])return true;var b=true,e;for(e in a)if(!d.isEmpty(a[e])){b=false;break}return b}else return b=="string"&&a==""?true:false};d.isNumber=function(a){return b.call(a)==="[object Number]"&&isFinite(a)};d.isInteger=function(a){return parseFloat(a)==parseInt(a)&& !isNaN(a)&&isFinite(a)};d.isString=function(a){return b.call(a)==="[object String]"};d.isNull=function(a){return a===""||a===null||a===void 0||typeof a=="undefined"||a=="undefined"||a=="null"?true:false};d.clone=function(a){if(a===null||typeof a!="object")return a;if(a.init)return a;else{var b=a.constructor;if(b){var e=new b,f;for(f in a)e[f]=d.clone(a[f])}}return e};d.sortOn=function(a,b){if(!b|| !a)return a;a.sort(function(a,g){return a[b]<g[b]? -1:a[b]>g[b]?1:0})};d.arrayShuffle=function(a){if(a){for(var b=a.length,e,f;b;)f=Math.floor(Math.random()*b--),e=a[b],a[b]=a[f],a[f]=e;return a}else return[]};d.arrayMove=function(a,b,e){a.splice(e,0,a.splice(b,1)[0])};d.arrayInsertAt=function(a,b,e){Array.prototype.splice.apply(a,[b,0].concat(e));return a};d.rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;d.trim=a&& !a.call("\ufeff\u00a0")?function(g){return g==null?"":a.call(g)}:function(a){return a==null?"":(a+"").replace(d.rtrim,"")};d.alphanumeric=function(a,b){return b?a.replace(/[^A-Za-z0-9]/g,""):a.replace(/[^A-Za-z0-9_\-\.]/g,"")};d.parseJSON=function(a){if(typeof a!="string")return null;try{return JSON.parse(a)}catch(b){return a||null}};d.hexToRgb=function(a){return!a?"":(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:[0,0,0]};d.makeColor=function(a,b){if(!a)return "";var e=d.hexToRgb(a);return d.isNumber(b)&&jbeeb.Browser.rgba?(b>1&&(b/=100),"rgba("+e.join(",")+(","+b)+")"):a};d.getXYWH=function(a){var b=0,e=0,f=0,h=0;if(a){for(var f=a.offsetWidth,h=a.offsetHeight,j=jbeeb.Browser.touch;a&& !isNaN(a.offsetLeft)&& !isNaN(a.offsetTop);)j?(b+=(a.offsetLeft||0)-(a.scrollLeft||0),e+=(a.offsetTop||0)-(a.scrollTop||0)):(b+=a.offsetLeft||0,e+=a.offsetTop||0),a=a.offsetParent;j&&(a=window.scrollY!=null?window.scrollY:window.pageYOffset,b+=window.scrollX!=null?window.scrollX:window.pageXOffset,e+=a)}return{x:b,y:e,w:f,h:h,xMax:b+f,yMax:e+h}};d.getWindowSize=function(){var a=window,b=document,e=b.documentElement,b=b.getElementsByTagName("body")[0];return{w:a.innerWidth||e.clientWidth||b.clientWidth,h:a.innerHeight||e.clientHeight||b.clientHeight}};d.contains=function(a,b){var e={},f={x:a.x,y:a.y,w:a.width,h:a.height},h={x:b.x,y:b.y,w:b.width,h:b.height};f.xMax=f.x+f.w;f.yMax=f.y+f.h;h.xMax=h.x+h.w;h.yMax=h.y+h.h;for(var j in f)e[j]=f[j]>=h[j]?true:false;return!e.x&& !e.y&&e.xMax&&e.yMax?true:false};d.getTimestamp=function(){var a=new Date;return Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).valueOf()};d.bindEvent=function(a,b,e){a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener&&a.addEventListener(b,e,false)};d.unbindEvent=function(a,b,e){a.attachEvent?a.detachEvent("on"+b,e):a.addEventListener&&a.removeEventListener(b,e,false)};d.getAttributes=function(a){var b={};if(a=a.attributes){for(var e=a.length,f=0;f<e;f++)jbeeb.Browser.ie?a[f].specified&&(b[a[f].nodeName]=a[f].nodeValue.toString()):b[a[f].nodeName]=a[f].value?a[f].value.toString():a[f].nodeValue.toString();return b}else return{}};jbeeb.Utils=d})();this.jbeeb=this.jbeeb||{};(function(){var d=function(){this.initialize()},b=d.prototype;d.initialize=function(a){a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent};b.T=null;b.initialize=function(){};b.addEventListener=function(a,b,c,e){var f=this.T;f?this.removeEventListener(a,b,c):f=this.T={};var h=f[a];h||(h=f[a]=[]);h.push({fn:b,arg:e,scope:c});return b};b.removeEventListener=function(a,b,c){var e=this.T;if(e&&(a=e[a]))for(e=a.length;e--;){var f=a[e];f.scope==c&&f.fn==b&&a.splice(e,1)}};b.removeAllEventListeners=function(a){a?this.T&&delete this.T[a]:this.T=null};b.dispatchEvent=function(a){var b=this.T;if(a&&b&&(b=b[a])){var c=[].slice.call(arguments);c.splice(0,1);for(var e=0;e<b.length;e++){var f=b[e];if(f.fn){var h=c,j=f.arg;typeof j!=="undefined"&&h.push(j);h.length?f.scope?f.fn.apply(f.scope,h):f.fn.apply(null,h):f.scope?f.fn.call(f.scope):f.fn()}}}};b.hasEventListener=function(a){var b=this.T;return!(!b|| !b[a])};b.toString=function(){return "[EventDispatcher]"};if(!jbeeb.EventDispatcher)jbeeb.EventDispatcher=d})();this.jbeeb=this.jbeeb||{};(function(){var d;if(!jbeeb.ready)jbeeb.ready=function(){var b,a,g=[],c,e=document,f=e.documentElement,h=f.doScroll,j=(h?/^loaded|^c/:/^loaded|c/).test(e.readyState);a=function(b){try{b=e.getElementsByTagName("body")[0].appendChild(e.createElement("span")),b.parentNode.removeChild(b)}catch(c){return setTimeout(function(){a()},50)}for(j=1;b=g.shift();)b()};e.addEventListener&&(c=function(){e.removeEventListener("DOMContentLoaded",c,false);a()},e.addEventListener("DOMContentLoaded",c,false),b=function(a){j?a():g.push(a)});h&&(c=function(){/^c/.test(e.readyState)&&(e.detachEvent("onreadystatechange",c),a())},e.attachEvent("onreadystatechange",c),b=function(a){if(self!=top)j?a():g.push(a);else{try{f.doScroll("left")}catch(c){return setTimeout(function(){b(a)},50)}a()}});return b}()})();this.jbeeb=this.jbeeb||{};(function(){function d(){return a&&a.call(performance)||(new Date).getTime()}var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,a=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow),g=function(a){this.init(a);return this},c=g.prototype;c.addEventListener=null;c.removeEventListener=null;c.removeAllEventListeners=null;c.dispatchEvent=null;c.hasEventListener=null;jbeeb.EventDispatcher.initialize(c);c.bM=50;c.ae=0;c.bP=null;c.bp=null;c.aD=null;c.aL=false;c.state=0;c.init=function(a){a.fps?(this.aL=a.animation&&b||false,this.bM=1E3/(a.fps||60)):this.bM=a.interval||50;a.startNow&&this.start()};c.stop=function(){this.state=0;this.aN(this.aq)};c.getInterval=function(){return this.bM};c.setInterval=function(a){this.bM=a};c.start=function(){if(!this.state)this.state=1,this.bP=[],this.bP.push(this.ae=d()),this.aL?this.aN(this.al):this.aN(this.aQ),this.ak()};c.getFPS=function(){var a=this.bP.length-1;return a<2?this.bM:1E3/((this.bP[0]-this.bP[a])/a)};c.al=function(){this.bp=null;this.ak();d()-this.ae>=(this.bM-1)*0.97&&this.az()};c.aQ=function(){this.bp=null;this.ak();this.az()};c.aq=function(){this.bp=null};c.ak=function(){if(this.bp==null)this.aL?(b(this.aD),this.bp=true):(this.bp&&clearTimeout(this.bp),this.bp=setTimeout(this.aD,this.bM))};c.aN=function(a){this.aD=a.bind(this)};c.az=function(){var a=d(),b=a-this.ae;this.ae=a;this.dispatchEvent("tick",{delta:b,time:a});for(this.bP.unshift(a);this.bP.length>100;)this.bP.pop()};c.toString=function(){return "[Ticker]"};if(!jbeeb.Ticker)jbeeb.Ticker=g})();this.jbeeb=this.jbeeb||{};(function(){var d,b;if(!jbeeb.Browser){var a={ie:null,ios:null,mac:null,webkit:null,oldWebkit:false,flash:0,touch:false};d=navigator.userAgent;d=d.toLowerCase();b=/(chrome)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(d)||/(msie) ([\w.]+)/.exec(d)||d.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(d)||[];d=b[1]||"";b=b[2]||"0";a.version=parseFloat(b);a.agent=d;b=false;d=="chrome"?b=true:d=="webkit"&&(b=true);a.webkit=b;a.chrome=/chrome/.test(d)||/chromium/.test(d);a.moz=/mozilla/.test(d);a.opera=/opera/.test(d);a.safari=/webkit/.test(d);a.ie=/msie/.test(d)&& !/opera/.test(d);a.android=/android/.test(d);b=navigator.platform.toLowerCase();a.platform=b;a.ios=/iphone/.test(b)||/ipod/.test(b)||/ipad/.test(b);a.win=a.windows=b?/win/.test(b):/win/.test(d);a.mac=b?/mac/.test(b):/mac/.test(d);a.cssPrefix="";if(a.chrome||a.safari)if(a.cssPrefix="webkit",a.chrome&&a.version<10)a.oldWebkit=true;else{if(a.safari&&a.version<5.1)a.oldWebkit=true}else if(a.opera)a.cssPrefix="o";else if(a.moz)a.cssPrefix="moz";else if(a.ie&&a.version>8)a.cssPrefix="ms";if(a.chrome||a.ios||a.android)a.flash=0;d=false;b="Webkit Moz O ms Khtml".split(" ");var g="",g=document.createElement("div");g.style.animationName&&(d=true);if(d===false)for(var c=0;c<b.length;c++)if(g.style[b[c]+"AnimationName"]!==void 0){g=b[c];g.toLowerCase();d=true;break}a.animation=d;a.modern=false;if(a.moz&&a.version>3)a.modern=true;if(a.opera&&a.version>9)a.modern=true;if(a.ie&&a.version>9)a.modern=true;if(a.chrome||a.safari||a.ios||a.android)a.modern=true;a.rgba=true;a.quirks=document.compatMode=="CSS1Compat"?false:true;if(a.ie)if(a.version<9)a.rgba=false;else{if(a.quirks)a.rgba=false,a.version=8,a.modern=false}else if(a.moz&&a.version<3)a.rgba=false;else if(a.safari&&a.version<3)a.rgba=false;else if(a.opera&&a.version<10)a.rgba=false;a.touch=typeof window.ontouchstart==="undefined"?false:true;jbeeb.Browser=a}})();this.jbeeb=this.jbeeb||{};(function(){jbeeb.PathInfo=function(){function d(a,b){var g,k,n,q,s,t,m,l,p,u,r,x,o,v,a=a||"";k=a.replace(/\\/g,"/");k.match(/:\//)||(l="",l=b?e:f,l=d(l,false),k.substr(0,1)=="/"?k=l.host+(c?"":"/")+k:k.substr(0,3)=="../"?(l=l.parenturl.split("/"),k=k.split("../"),n=k.pop(),l.splice(l.length-k.length,k.length,n),k=l.join("/")):k=l.pathurl+(c?"":"/")+k);k.substr(-1)=="/"&&(k=k.substr(0,k.length-1));g=k.split("://");k=g.shift();l=(g.shift()||"").replace("//","/");l=l.split("/");n=l.shift()||"";n.indexOf("@")> -1&&(g=n.split("@"),o=g[0].split(":"),x=o[0],o=o[1],n=g[1]);n.indexOf(":")> -1&&(g=n.split(":"),q=g[1],n=g[0]);l=l.join("/");l.indexOf("#")!= -1&&(g=l.split("#"),r=g[1],l=g[0]);l.indexOf("?")!= -1&&(g=l.split("?"),u=g[1],l=g[0]);g=l.split("/");m=g.pop();l=g.join("/");m==".."&&(m="");g=m.split(".");g.length>1&&(t=g.pop().toLowerCase(),s=g.join("."));v=k+"://"+n+(q?":"+q:"");l="/"+l+(l.length>0?"/":"");p=v+l;g=v+l+m+(u?"?"+u:"")+(r?"#"+r:"");var w=l,y=p;t?(l+=m,p+=m):(l+=m+(m!=""?"/":""),p+=m+(m!=""?"/":""),s=m,!u&& !r&&g.substr(-1)!="/"&&(g+="/"));c===false&&(w.substr(-1)=="/"&&(w=w.substr(0,w.length-1)),y.substr(-1)=="/"&&(y=y.substr(0,y.length-1)),t||(l.substr(-1)=="/"&&(l=l.substr(0,l.length-1)),p.substr(-1)=="/"&&(p=p.substr(0,p.length-1)),g.substr(-1)=="/"&&(g=g.substr(0,g.length-1))));return{source:a||null,url:g||null,protocol:k||null,domain:n||null,port:q||null,basename:s||null,ext:t||null,filename:m||null,path:l||null,pathurl:p||null,parent:w||null,parenturl:y||null,query:u||null,fragment:r||null,username:x||null,password:o||null,host:v||null}}function b(a){return(a||"").split("?")[0].split("/").pop()}function a(a){a=a.split("/");a.pop();return a.join("/").toString()+(a.length>0?"/":"")}function g(b){var g=document.getElementsByTagName("script");return(g=g[g.length-1].getAttribute("src"))?b?g.split("?")[0]:a(g.split("?")[0]):""}var c=true,e=g(),f=a(window.location.href);return{parse:d,filename:b,basename:function(a){a=b(a).split(".");a.pop();return a.join(".")},basepath:a,scriptPath:e,getScriptPath:g,pagePath:f,ext:function(a){return(a||"").split("?")[0].split("/").pop().split(".").pop().toLowerCase()}}}()})();this.jbeeb=this.jbeeb||{};(function(){if(!jbeeb.Base)jbeeb.amReady=false,jbeeb.ticker=null,jbeeb.tickerInterval=50,jbeeb.scriptPath=null,jbeeb.pagePath="",jbeeb.assetsBasePath="",jbeeb.focus=null,jbeeb.binit=0;jbeeb.unfocus=function(){if(jbeeb.focus){var b=jbeeb.focus;b.element&&b.element.blur();jbeeb.focus=null}};var d=function(){};d.aV=0;d.bD=[];d.H=[];d.scriptPath=null;d.ag=function(){return "jbeeb_"+d.aV++};d.bE=function(b){d.H.push(b);jbeeb.amReady&&d.ab()};d.ab=function(){var b=d.H.length;if(b>0)for(;b--;){var a=d.H.splice(b,1)[0];a&&a.init&&a.init.call(a)}};d.init=function(){if(!jbeeb.amReady){jbeeb.ticker=new jbeeb.Ticker({interval:jbeeb.tickerInterval,startNow:1});if(!jbeeb.assetsBasePath)jbeeb.assetsBasePath="";if(window.location.href.substr(0,4)!="http"){if(!jbeeb.pagePath)jbeeb.pagePath="";if(!jbeeb.scriptPath)jbeeb.scriptPath=""}else{if(!jbeeb.pagePath)jbeeb.pagePath=jbeeb.PathInfo.pagePath;if(!jbeeb.scriptPath)jbeeb.scriptPath=jbeeb.PathInfo.scriptPath}jbeeb.FlashDetect&&jbeeb.FlashDetect.run();jbeeb.amReady=true;d.ab()}};if(!jbeeb.Base)jbeeb.Base=d,jbeeb.register=d.bE,jbeeb.getUID=d.ag})();if(!jbeeb.binit)jbeeb.binit=1,jbeeb.ready(function(){jbeeb.Base.init()});this.jbeeb=this.jbeeb||{};(function(){var d=function(a){this.init(a)},b=d.prototype;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;jbeeb.EventDispatcher.initialize(b);b.amStage=null;b.element=null;b.style=null;b.V=null;b.alpha=1;b.id=null;b.name=null;b.parent=null;b.stage=null;b.rotation=0;b.scale=1;b.scaleX=1;b.scaleY=1;b.stretchX=1;b.stretchY=1;b.skewX=0;b.skewY=0;b.origin=null;b.originX=0;b.originY=0;b.originType="px";b.shadow=null;b.bevel=null;b.outline=null;b.inset=null;b.visible=true;b.overflow="visible";b.autoCenter=null;b.x=0;b.y=0;b.width=0;b.height=0;b.flex="wh";b.bU=1;b.bs=1;b.pin=null;b.bd=null;b.aW=null;b.z=0;b.temp=null;b.rounded=null;b.fill=null;b.stroke=null;b.image=null;b.gradient=null;b.aH=null;b.init=function(a){this.temp={};this.style=null;this.alpha=1;this.parent=this.name=this.id=null;this.rotation=0;this.scaleY=this.scaleX=this.scale=1;this.skewY=this.skewX=0;this.visible=true;this.overflow="visible";this.height=this.width=this.y=this.x=0;this.flex="wh";this.bs=this.bU=1;this.aW=this.bd=this.pin=null;this.z=0;this.autoCenter=null;this.stroke={};this.fill={};this.inset=this.shadow=null;this.gradient={};this.rounded=null;this.V=jbeeb.storeCSS?{}:null;var a=a||{},b=jbeeb.getUID();this.id=b;if(a.element)this.element=a.element;else if(this.element=document.createElement("div"),this.element.id=b,this.element.style.position="absolute",this.element.style.overflow="visible",this.V)this.V.position="absolute",this.V.overflow="visible";if(a.standalone)this.amStage=1;this.aH=a.inline?"inline-block":"block";if(a.name)this.name=a.name;this.element.id=this.type+"_"+this.element.id;b=this.style=this.element.style;b.padding="0px";b.margin="0px";b.border="0px";b.fontSize="100%";b.verticalAlign="baseline";b.outline="0px";b.background="transparent";b.WebkitTextSizeAdjust="100%";b.msTextSizeAdjust="100%";b.WebkitBoxSizing=b.MozBoxSizing=b.boxSizing="padding-box";b.backgroundClip="padding-box";if(this.V)b=this.V,b.padding="0px",b.margin="0px",b.border="0px",b.fontSize="100%",b.verticalAlign="baseline",b.outline="0px",b.background="transparent",b.WebkitTextSizeAdjust="100%",b.msTextSizeAdjust="100%",b.boxSizing="padding-box",b.backgroundClip="padding-box";a.editable||this.setSelectable(false);this.setCursor("inherit");if(a)this.autoCenter=a.center,typeof a.flex!="undefined"&&this.setFlex(a.flex),typeof a.pin!="undefined"&&this.setPin(a.pin),typeof a.overflow!="undefined"&&this.setOverflow(a.pin);this.setOrigin(0,0,"px");this.applySkin(a,false)};b.setSelectable=function(a){var b=this.style,c="none",e="-moz-none";a&&(e=c="text");b.userSelect=b.WebkitUserSelect=b.MozUserSelect=b.OUserSelect=c;b.MozUserSelect=e;if(this.V)this.V.userSelect=c,this.V.MozUserSelect=e};b.setBorderRender=function(a){var b=this.style,a=a=="outside"?"content-box":"border-box";b.WebkitBoxSizing=b.MozBoxSizing=b.boxSizing=a;if(this.V)this.V.boxSizing=a};b.applySkin=function(a,b){this.stroke={};this.fill={};this.gradient=null;this.rounded=0;this.inset=this.outline=this.bevel=this.shadow=this.image=null;if(!(b==true&&b)){var c=jbeeb.Utils.isNumber(a.x)?a.x:0,e=jbeeb.Utils.isNumber(a.y)?a.y:0;this.setXY(c,e);a.height&&this.setHeight(a.height);a.width&&this.setWidth(a.width);a.h&&this.setHeight(a.h);a.w&&this.setWidth(a.w)}this.setRounded(a.rounded);var c=a.fill,f,h;if(c)typeof c=="string"?(f=c,h=1):(f=c.color,h=c.alpha);this.setFill(f,h);var c=a.stroke,d=e=h=f=null;c&&(typeof c=="string"?(f=c,e=h=1,d="solid"):c.color!=null&&(f=c.color||"#000000",h=jbeeb.Utils.isNumber(c.alpha)?c.alpha:1,e=c.weight||1,d=c.style||"solid"));this.setStroke(e,f,h,d);this.setStrokeStyle(d);var c=a.image,i,k;if(a.image)typeof c=="string"?(i=c,k=null):(i=c.url,k=c.mode);this.setImage(i,k);this.setShadow(a.shadow);this.setBevel(a.bevel);this.setOutline(a.outline);this.setInset(a.inset)};b.bq=function(){var a=this.style;if(a){var b="",c="",e="",f="",h="",d=0,i=this.fill;i&&(jbeeb.Utils.isArray(i.color)?d=1:i.color&&(c=jbeeb.Utils.makeColor(i.color,i.alpha)));if(this.image&&this.image.url){b='url("'+this.image.url+'")';d=this.image.mode||"center";if(d!="pattern"){if(d=="fit")e="100% 100%";else if(d=="contain"||d=="cover")e="contain";f="no-repeat";h="center center"}d=0}if(d){d=i.color;if(this.V)this.V.gradient=1;for(var i=i.alpha||"v",k=jbeeb.Browser,n=[],q=[],s=d.length,t=k.oldWebkit,m=0;m<s;m+=3){var l=jbeeb.Utils.makeColor(d[m],d[m+1]),p=d[m+2];p>100?p=100:p<0&&(p=0);t?q.push("color-stop("+p+"%, "+l+")"):n.push(l+" "+p+"%")}if(k.modern)b=k.cssPrefix,b==""?(b="linear-",i=(i=="v"?"to bottom, ":"to right, ")+n.join(",")):b=="webkit"&&t?(d=q.join(","),b="-webkit-",i=i=="v"?"linear, left top, left bottom, "+d:"linear, left top, right top, "+d):(b="-"+b+"-linear-",i=(i=="v"?"top, ":"left, ")+n.join(",")),b=b+"gradient("+i+")";else if(k.ie&&k.version<9){if(i="progid:DXImageTransform.Microsoft.gradient( gradientType="+(i=="v"?"0":"1")+", startColorstr='"+d[0]+"', endColorstr='"+d[d.length-3]+"')",this.style.filter=i,this.style.msFilter='"'+i+'"',this.V)d=this.V,d.filter=i,d.msFilter='"'+i+'"'}else{b="";for(m=0;m<s;m+=3)jbeeb.Utils.makeColor(d[m],d[m+1]),b+='<stop offset="'+d[m+2]+'%" stop-color="'+d[m]+'" stop-opacity="'+d[m+1]+'"/>';d="0";n="100";i=="h"&&(d="100",n="0");i="jbeeb-grad-"+this.id;q="";q+='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none">';q+='  <linearGradient id="'+i+'" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="'+d+'%" y2="'+n+'%">';q+=b;q+="  </linearGradient>";q+='  <rect x="0" y="0" width="1" height="1" fill="url(#'+i+')" />';q+="</svg>";b='url("data:image/svg+xml;base64,'+jbeeb.Base64.encode(q)+'")'}}else if(this.V)this.V.gradient=0;a.backgroundColor=c||"";a.backgroundImage=b||"none";a.backgroundSize=e||"";a.backgroundRepeat=f||"";a.backgroundPosition=h||"";if(this.V)d=this.V,d.backgroundColor=c||"",d.backgroundImage=b||"none",d.backgroundSize=e||"",d.backgroundRepeat=f||"",d.backgroundPosition=h||""}};b.setFill=function(a,b){if(!this.fill)this.fill={};this.fill.color=a;this.fill.alpha=b;this.bq()};b.setImage=function(a,b){if(a){if(!this.image)this.image={};this.image.url=a;this.image.mode=b}else this.image=null;this.bq()};b.setImageSizing=function(a){if(this.image)this.image.mode=a,this.bq()};b.setStroke=function(a,b,c,e){if(!this.stroke)this.stroke={};typeof a=="string"&&(b=a,a=1);a>0&&(a=Math.round(a));var f=c||1,e=e||"solid";b==null&&(e=f=a=null);c=this.stroke;c.weight=a;c.color=b;c.alpha=f;c.style=e;var d=this.style;a?(c=a+"px",b=jbeeb.Utils.makeColor(b,f),f= -a+"px",a= -a+"px"):a=f=b=c=e="";d.borderStyle=e;d.borderWidth=c;d.borderColor=b;d.marginLeft=f;d.marginTop=a;if(this.V)d=this.V,d.borderStyle=e,d.borderWidth=c,d.borderColor=b,d.marginLeft=f,d.marginTop=a;this.ah()};b.setStrokeStyle=function(a){a=a||"";this.style.borderStyle=a;if(this.V)this.V.borderStyle=a};b.setCursor=function(a){this.style.cursor=a;if(this.V)this.V.cursor=a};b.setWidth=function(a){var b=this.style;if(b&&a>0&&(this.width=a,b.width=a+"px",this.autoCenter&&this.center(this.autoCenter),this.rounded&&this.ah(),this.V))this.V.width=a+"px"};b.setHeight=function(a){var b=this.style;if(b&&a>0&&(this.height=a,b.height=a+"px",this.autoCenter&&this.center(this.autoCenter),this.rounded&&this.ah(),this.V))this.V.height=a+"px"};b.measure=function(){var a=this.element,b=a.clientWidth,a=a.clientHeight;this.width=b;this.height=a;return[b,a]};b.setSize=function(a,b){var c=this.style;if(c&&a>0&&b>0&&(this.width=a,this.height=b,c.width=a+"px",c.height=b+"px",this.autoCenter&&this.center(this.autoCenter),this.rounded&&this.ah(),this.V))this.V.width=a+"px",this.V.height=b+"px"};b.setXY=function(a,b){this.x=a;this.y=b;var c=this.style;c.left=a+"px";c.top=b+"px";if(this.V)this.V.left=a+"px",this.V.top=b+"px"};b.setBaseXY=function(a,b){this.setXY(a,b);this.aI=a;this.ba=b};b.setXYWH=function(a,b,c,e){this.width=c;this.height=e;this.x=a;this.y=b;var f=this.style;f.width=(c||0)+"px";f.height=(e||0)+"px";f.left=(a||0)+"px";f.top=(b||0)+"px";if(this.V)f=this.V,f.width=(c||0)+"px",f.height=(e||0)+"px",f.left=(a||0)+"px",f.top=(b||0)+"px"};b.setX=function(a){this.x=a;this.style.left=(a||0)+"px";if(this.V)this.V.left=(a||0)+"px"};b.setY=function(a){this.y=a;this.style.top=(a||0)+"px";if(this.V)this.V.top=(a||0)+"px"};b.setTop=function(a){this.y=a;this.style.top=a+"px";if(this.V)this.V.top=(a||0)+"px"};b.setBottom=function(a){this.y=a-this.height;this.style.bottom=a+"px";if(this.V)this.V.bottom=(a||0)+"px"};b.setLeft=function(a){this.x=a;this.style.left=(a||0)+"px";if(this.V)this.V.left=(a||0)+"px"};b.setRight=function(a){this.x=a=(a||0)-this.width;this.style.right=a+"px";if(this.V)this.V.right=a+"px"};b.setZ=function(a){a<0&&(a=0);this.z=a;var b=this.style;if(!b)this.style=b=this.element.style;b.zIndex=a;if(this.V)this.V.zIndex=a};b.setScale=function(a){this.scaleY=this.scaleX=this.scale=a;this.aS("scale("+a+","+a+")")};b.setScaleX=function(a){this.scaleX=a;this.aS("scale("+this.scaleX+","+a+")")};b.setScaleY=function(a){this.scaleY=a;this.aS("scale("+a+","+this.scaleY+")")};b.stretch=function(a,b){this.stretchX=a;this.stretchY=b;if(a>0&&b>0){this.bU&&this.setWidth(this.width*a);this.bs&&this.setHeight(this.height*b);var c=this.x,e=this.y;if(this.bd){if(this.bd=="r"&&this.parent){if(this.bO==null)this.bO=this.parent.width-this.x;c=this.parent.width-this.bO;this.setX(c)}}else if(this.originX){var f=this.originX;this.setX(f+(c-f)*a)}else this.setX(c*a);if(this.aW){if(this.aW=="b"&&this.parent){if(this.af==null)this.af=this.parent.height-this.y;c=this.parent.height-this.af;this.setY(c)}}else this.originY?(f=this.originY,this.setY(f+(e-f)*b)):this.setY(e*b)}this.dispatchEvent("stretch",this.width,this.height)};b.bO=null;b.af=null;b.setPin=function(a){this.pin=a;this.aW=this.bd=0;if(a){a=a.toLowerCase();if(a.match(/r/))this.bd="r";if(a.match(/l/))this.bd="l";if(a.match(/t/))this.aW="t";if(a.match(/b/))this.aW="b";if(a.match(/s/))this.aW=this.bd="s"}};b.setFlex=function(a){this.bs=this.bU=0;if(a)a.toLowerCase(),this.bU=a.match(/w/)?1:0,this.bs=a.match(/h/)?1:0;this.flex=a};b.setRotation=function(a){this.rotation=a;this.aS("rotate("+a+"deg)")};b.setSkew=function(a,b){this.skewX=a;this.skewY=b;this.aS("skew("+a+"deg,"+b+"deg)")};b.setOrigin=function(a,b,c){this.originX=a;this.originY=b;c=(this.originType=c)?c:"px";a=a+c+" "+b+c;b=this.style;b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin=a;if(this.V)this.V.transformOrigin=a};b.aS=function(a){var b=this.style;b.transform=b.transform=b.msTransform=b.WebkitTransform=b.MozTransform=a;if(this.V)this.V.transform=a};b.center=function(a){if((this.parent||this.amStage)&&this.width&&this.height){var b=this.x,c=this.y,e,f;this.amStage?(e=jbeeb.Utils.getXYWH(this.element.parentNode),f=e.w*0.5,e=e.h*0.5):(e=this.parent,e.width||e.measure(),f=e.width*0.5,e=e.height*0.5);var d=this.width*0.5,j=this.height*0.5;a=="v"?c=e-j:a=="h"?b=f-d:(b=f-d,c=e-j);this.setXY(b,c)}};b.setOverflow=function(a){this.overflow=a;var b="",c="";if(a=="x"||a=="y"|| !a)a=="x"?(b="auto",c="hidden"):a=="y"&&(b="hidden",c="auto",jbeeb.Browser.ie&&this.setWidth(this.width+20)),this.style.overflowX=b,this.style.overflowY=c;this.style.overflow=a;if(this.V){var e=this.V;e.overflow=a;e.overflowX=b;e.overflowY=c}};b.setVisible=function(a){this.visible=a;var b=this.style,a=a?this.aH:"none";b.display=a;if(this.V)this.V.display=a};b.show=function(){this.setVisible(true)};b.hide=function(){this.setVisible(false)};b.setAlpha=function(a){this.alpha=a;if(a!==null)this.style.opacity=""+a;if(this.V)this.V.opacity=""+a};b.setRounded=function(a){this.rounded=a;this.ah()};b.ah=function(){var a="",b=this.rounded;if(b){var c=this.width,e=this.height,f=0,d=this.stroke;if(d)d=d.weight,jbeeb.Utils.isNumber(d)&&(f=d*2);c=((c<e?c:e)+f)*0.5;jbeeb.Utils.isNumber(b)?a=c*b+"px":b&&typeof b=="object"&&(a+=(c*b.tl||0)+"px "+(c*b.tr||0)+"px "+(c*b.br||0)+"px "+(c*b.bl||0)+"px")}b=this.style;b.borderRadius=b.MozBorderRadius=b.WebkitBorderRadius=b.OBorderRadius=b.msBorderRadius=a;if(this.V)this.V.borderRadius=a};b.onAdded=function(){this.autoCenter&&this.center(this.autoCenter);this.dispatchEvent("added",this)};b.toFront=function(){this.parent&&this.parent.toFront(this)};b.toBack=function(){this.parent&&this.parent.toBack(this)};b.aA=function(){var a=this.style,b=this.bN(),c=this.bC(),e=this.aK(),f=this.aC(),d="none";if(!(b==[]&&c==[]&&e==[]&&f==[])){for(var b=c.concat(e,f,b),c=b.length,e=[],f=[],j=0,i=0;i<c;i++)j==0?b[i]==1&&f.push("inset"):j<4?f.push(b[i]+"px"):(f.push(jbeeb.Utils.makeColor(b[i],b[i+1])),e.push(f.join(" ")),f=[],++i,j= -1),j++;e.length>0&&(d=e.join(","))}a.boxShadow=a.MozBoxShadow=a.WebkitBoxShadow=a.OBoxShadow=a.msBoxShadow=d;if(this.V)this.V.boxShadow=d};b.bN=function(){var a=this.shadow;return a?[0,a.x||0,a.y||0,a.s,a.c||"#000000",a.a||0.4]:[]};b.setShadow=function(a){this.shadow=a;this.aA()};b.aC=function(){var a=this.inset;return a?[1,a.x||0,a.y||0,a.s,a.c||"#000000",a.a||0.4]:[]};b.setInset=function(a){this.inset=a;this.aA()};b.bC=function(){var a=this.bevel;return a?[1,-a.x,-a.y,a.s1,a.c1||"#FFFFFF",a.a1,1,a.x,a.y,a.s2,a.c2||"#000000",a.a2]:[]};b.setBevel=function(a){if(a)jbeeb.Utils.isNumber(a)?a={x: -a,y: -a,s1:0,s2:0,c1:"#FFFFFF",c2:"#000000",a1:1,a2:1}:(a.c1=a.c1||"#FFFFFF",a.c2=a.c2||"#000000");this.bevel=a;this.aA()};b.aK=function(){if(this.outline){var a=this.outline;return[0,-a.weight,-a.weight,a.spread||0,a.color||"#000000",a.alpha||1,0,a.weight,-a.weight,a.spread||0,a.color||"#000000",a.alpha||1,0,-a.weight,a.weight,a.spread||0,a.color||"#000000",a.alpha||1,0,a.weight,a.weight,a.spread||0,a.color||"#000000",a.alpha||1]}else return[]};b.setOutline=function(a){this.outline=a;this.aA()};b.setMouseEnabled=function(a){a=a===0||a===false?"none":"auto";this.style.pointerEvents=a;if(this.V)this.V.pointerEvents=a};b.bo=null;b.MELbubble=false;b.addMEL=function(a,b,c,e,f){this.MELbubble=e;if(!this.bo)this.bo=new jbeeb.MouseEventListener(this);(a=="mouseOver"||a=="mouseOut"||a=="mouseMove")&&this.bo.enableMouseOver(1);this.addEventListener(a,b,c,f)};b.removeMEL=function(a,b){this.removeEventListener(a,b);a=="mouseOver"&&this.bo.enableMouseOver(0)};b.setFloat=function(a){this.style.position="relative";this.style.left="";this.style.top="";this.style.cssFloat=a;this.style.display="inline-block";if(this.V)this.V.position="relative",this.V.left=null,this.V.top=null,this.V.cssFloat=a,this.V.display="inline-block"};b.destroy=function(){this.removeAllEventListeners();if(this.bo)this.bo.destroy(),this.bo=null;if(this.element&&this.element.parentNode)this.element.parentNode.removeChild(this.element),this.element=null;if(this.parent)this.parent.removeChild(this),this.parent=null;this.V=this.element=this.image=this.inset=this.shadow=this.outline=this.bevel=this.gradient=this.fill=this.stroke=this.temp=null};b.getCSS=function(){return this.V};b.toString=function(){return "[Box (name="+this.name+")]"};b.type="Box";jbeeb.Box=d})();this.jbeeb=this.jbeeb||{};(function(){var d=function(a){this.init(a)},b=d.prototype=new jbeeb.Box(null);b.textFit=null;b.text="";b.bf="";b.textSize=null;b.textColor=null;b.shadowText=null;b.bevelText=null;b.outlineText=null;b.insetText=null;b.font=null;b.align=null;b.textScale=null;b.selectable=null;b.bold=null;b.padding=null;b.editable=null;b.bz=null;b.multiline=null;b.baselineShift=null;b.bn=null;b.K=null;b.aG=false;b.aF=b.init;b.init=function(a){if(a){if(a.editable){var b;b=a.multiline?document.createElement("textarea"):document.createElement("input");this.bz=1;b.id=jbeeb.getUID();b.style.position="absolute";b.style.overflow="visible";if(this.V)this.V.position="absolute",this.V.overflow="visible";if(!a.multiline)b.type="text";a.element=b}this.aF(a);a.element=null;b=this.style;b.textDecoration="none";b.zoom=1;b.size=a.h;this.text=a.text||"";if(this.V)b=this.V,b.fontSmooth="always",b.WebkitFontSmoothing="antialiased",b.textDecoration="none",b.zoom=1,b.size=a.h;this.applySkin(a,true)}};b.bA=b.applySkin;b.applySkin=function(a,b){this.aG=true;if(a.editable){var c=null;a.fill&&(c=typeof a.fill=="object"?a.fill.color:a.fill);a.stroke=a.stroke||c||{weight:1,color:"#000000",alpha:1}}this.bA(a,b);this.textFit=a.textFit||null;this.font=a.font||"Arial, Helvetica, sans-serif";this.align=a.align||"left";this.textScale=a.textScale||1;this.bold=a.bold||0;this.selectable=a.selectable||0;this.editable=a.editable||0;this.multiline=a.multiline||0;this.baselineShift=a.baselineShift||0;if(!b)this.text=a.text||"";this.bf="";this.textColor={};if(a.textSize)this.textSize=a.textSize;a.editable==1&&this.setEditable(1);this.setMultiline(this.multiline,true);this.setText(this.text);if(a.textColor){var c=a.textColor,e={};if(typeof c=="string")e={color:c,alpha:1};else if(e=c,!e.color)e.color=null,e.alpha=null;this.setTextColor(e.color||"#000000",e.alpha||1)}if(a.shadowText)this.shadowText=a.shadowText;if(a.insetText)this.insetText=a.insetText;if(a.bevelText)this.bevelText=a.bevelText;if(a.outlineText)this.outlineText=a.outlineText;if(a.shadow)this.shadow=a.shadow;if(a.inset)this.insetText=a.inset;if(a.bevel)this.bevel=a.bevel;if(a.outline)this.outline=a.outline;a.padding&&this.setPadding(a.padding);if(a.alphaNumeric)this.alphaNumeric=1;if(a.numeric)this.numeric=1;this.setBaselineShift(this.baselineShift);this.aG=false;this.bV();this.bK()};b.setMultiline=function(a){this.multiline=a;var b=this.style;if(a){if(!this.textSize)this.textSize=12;a="normal"}else a="nowrap";b.whiteSpace=a;if(this.V)this.V.whiteSpace=a;this.R()};b.bz=0;b.setEditable=function(a){a===1?(this.amSM||this.setCursor("text"),this.K?this.K.removeAllEventListeners():this.K=new jbeeb.Keyboard(this.element),this.K.addEventListener("keydown",this.keyHandler,this),this.K.addEventListener("keyup",this.keyHandler,this),this.setOverflow("hidden"),jbeeb.Utils.bindEvent(this.element,"focus",this.setFocus.bind(this)),jbeeb.Utils.bindEvent(this.element,"blur",this.an.bind(this)),this.addMEL("mouseUp",this.setFocus,this)):(this.amSM||this.setCursor("default"),this.K&&this.K.removeAllEventListeners(),jbeeb.Utils.unbindEvent(this.element,"focus",this.setFocus.bind(this)));this.editable=a};b.numeric=null;b.alphaNumeric=null;b.keyHandler=function(a,b,c){var e=true;this.alphaNumeric?e=this.K.alphaNumeric(b):this.numeric&&(e=this.K.numeric(b));if(this.multiline==0&&(b==108||b==13))e=false,c=="keyup"&&this.dispatchEvent("enter",this,this.text);b==9&&(e=false,c=="keyup"&&this.dispatchEvent("tab",this,this.text));e?(this.text=this.bz&& !this.multiline?this.element.value:this.bG.text,c=="keyup"&&this.dispatchEvent("change",this,this.text)):this.K.block(a)};b.an=function(){this.dispatchEvent("change",this,this.text)};b.setPadding=function(a){this.padding=a;var b;b=this.bG?this.bG.style:this.style;var c="",e="",f="",d="";this.multiline?(c=a+"px",e=a+"px",f=a+"px",d=a+"px"):this.align=="left"?a&&(c=a+"px"):this.align=="right"&&a&&(e=a+"px");b.paddingLeft=c;b.paddingRight=e;b.paddingTop=f;b.paddingBottom=d;if(this.V)a=this.V,a.paddingLeft=c,a.paddingRight=e,a.paddingTop=f,a.paddingBottom=d};b.bg=function(){var a=this.font,b=this.textColor||{},b=jbeeb.Utils.makeColor(b.color,b.alpha),c=this.bold?"bold":"normal",e=this.style;e.fontFamily=a;e.color=b;e.textAlign=this.align;e.fontWeight=c;if(this.V)e=this.V,e.fontFamily=a,e.color=b,e.textAlign=this.align,e.fontWeight=c};b.setFont=function(a){this.font=a;this.style.fontFamily=a;if(this.bG)this.bG.style.fontFamily=this.font;if(this.V)this.V.fontFamily=a;this.bV()};b.setAlign=function(a){this.align=a;this.style.textAlign=a;a=="center"&&this.setPadding(0);if(this.V)this.V.textAlign=a};b.setBold=function(a){this.bold=a?"bold":"";this.style.fontWeight=this.bold;if(this.V)this.V.fontWeight=this.bold;this.bV()};b.setBaselineShift=function(a){(this.baselineShift=a)?a>1?a=1:a< -1&&(a= -1):a=0;a*= -1;this.bn=1+a;this.bV()};b.measureText=function(a){if(this.text||a){var b=document.createElement("div");document.body.appendChild(b);var c=b.style;c.fontSize=this.height*this.textScale+"px";c.fontFamily=this.font;c.fontWeight=this.bold?"bold":"normal";c.position="absolute";c.left= -1E3;c.top= -1E3;b.innerHTML=a||this.text;a={w:b.clientWidth,h:b.clientHeight};document.body.removeChild(b);return a}else return 0};b.setTextColor=function(a,b){if(!this.textColor)this.textColor={};this.textColor.color=a;this.textColor.alpha=b;var c=jbeeb.Utils.makeColor(a,b);this.style.color=c;if(this.V)this.V.color=c};b.setText=function(a){if(this.element){this.text=a=a==""|| !a?"":String(a);if(this.bz&& !this.multiline)this.element.value=a;else{if(!this.bG){var b=document.createElement("span");b.style.fontFamily=this.font;this.element.appendChild(b);this.bG=b}this.bG.innerHTML=a}this.bf!=a&&this.bV();this.bf=a}};b.selectAll=function(){if(this.bz)jbeeb.focus=this,this.element.focus(),this.element.select()};b.bc=b.setWidth;b.setWidth=function(a){a!=this.width&&(this.bc(a),this.R())};b.ad=b.setHeight;b.setHeight=function(a){a!=this.height&&(this.ad(a),this.R())};b.aO=b.setSize;b.setSize=function(a,b){if(a!=this.width||b!=this.height)this.aO(a,b),this.R()};b.setTextScale=function(a){this.textScale=a||1;this.R()};b.setTextSize=function(a){this.textSize=a;this.R()};b.setTextFit=function(a){this.textFit=a;this.R()};b.ai=b.onAdded;b.onAdded=function(){this.ai();this.bV()};b.setFocus=function(){jbeeb.focus=this;this.element.focus()};b.R=function(){if(this.text!=""){var a=null,b=null,c=null;if(this.textSize)a=this.textSize,b="1em",c=a+"px";else{var e=this.width,f=this.height;if(e>0&&f>0)if(this.textFit=="wh")a=e<f?e:f,a=this.textScale>0?a*this.textScale:a;else if(this.textFit=="w"){if(e=this.width/this.measureText().w/2,jbeeb.Utils.isNumber(e)&&e>0)this.textScale=e,a=f*e}else a=f*this.textScale;else a=0}a&&(b=this.height*this.bn/a+"em",c=a+"px");a=this.style;a.lineHeight=b;a.fontSize=c;if(this.V)this.V.lineHeight=b,this.V.fontSize=c}};b.getTextSize=function(){return this.style.fontSize||null};b.bV=function(){this.aG||(this.R(),this.bg())};b.bK=function(){var a=this.aM(),b=this.bH(),c=this.be(),e=this.aE(),f="none";if(!(a==[]&&b==[]&&c==[]&&e==[])){for(var a=b.concat(c,a,e),b=a.length,c=[],e=[],d=0,j=0;j<b;j++)d==0?a[j]==1&&e.push("inset"):d<4?e.push(a[j]+"px"):(e.push(jbeeb.Utils.makeColor(a[j],a[j+1])),c.push(e.join(" ")),e=[],++j,d= -1),d++;c.length>0&&(f=c.join(","))}a=this.style;a.textShadow=a.MozTextShadow=a.WebkitTextShadow=a.OTextShadow=a.msTextShadow=f;if(this.V)this.V.textShadow=f};b.aM=function(){var a=this.shadowText;return a?[0,a.x,a.y,a.s,a.c,a.a]:[]};b.setShadowText=function(a){this.shadowText=a;this.bK()};b.aE=function(){var a=this.insetText;return a?[1,a.x,a.y,a.s,a.c,a.a]:[]};b.setInsetText=function(a){this.insetText=a;this.bK()};b.bH=function(){if(this.bevelText){var a=this.bevelText,b=[];a.c1&&a.a1>0&&(b=[0,-a.x,-a.y,a.s1,a.c1||"#000000",a.a1]);a.c2&&a.a2>0&&(b=b.concat([0,a.x,a.y,a.s2,a.c2||"#FFFFFF",a.a2]));return b}else return[]};b.setBevelText=function(a){this.bevelText=a;this.bK()};b.be=function(){if(this.outlineText){var a=this.outlineText;return[0,-a.weight,-a.weight,a.spread||0,a.color||"#000000",a.alpha,0,a.weight,-a.weight,a.spread||0,a.color||"#000000",a.alpha,0,-a.weight,a.weight,a.spread||0,a.color||"#000000",a.alpha,0,a.weight,a.weight,a.spread||0,a.color||"#000000",a.alpha]}else return[]};b.setOutlineText=function(a){this.outlineText=a;this.bK()};b.toString=function(){return "[TextBox (name="+this.name+")]"};b.type="TextBox";jbeeb.TextBox=d})();this.jbeeb=this.jbeeb||{};(function(){var d=function(a){this.init(a)},b=d.prototype=new jbeeb.Box(null);b.L=[];b.addChild=function(a){if(a==null)return a;var b=arguments.length;if(b>0)for(var c=0;c<b;c++){var e=arguments[c];e.parent&&e.parent.removeChild(e);e.parent=this;e.stage=this.amStage==1?this:this.stage;e.setZ(this.L.length);this.element.appendChild(e.element);e.onAdded&&e.onAdded.call(e);this.L.push(e)}};b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=true;b--;)c=c&&this.removeChild(arguments[b]);return c}return this.removeChildAt(this.L.indexOf(a))};b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],e=0;e<b;e++)c[e]=arguments[e];c.sort(function(a,b){return b-a});for(var f=true,e=0;e<b;e++)f=f&&this.removeChildAt(c[e]);return f}if(a<0||a>this.L.length-1)return false;if(b=this.L[a])b.element&&b.element.parentNode&&b.element.parentNode.removeChild(b.element),b.parent=null;this.L.splice(a,1);this.aj();return true};b.removeAllChildren=function(){for(var a=this.L;a.length;)this.removeChildAt(0)};b.aj=function(){for(var a=this.L.length,b=0;b<a;b++){var c=this.L[b];c&&c.setZ(b+1)}};b.toFront=function(a){if(a){for(var b=this.L.length,c=0,e=b;e--;)if(this.L[e]==a){c=e;break}jbeeb.Utils.arrayMove(this.L,c,b-1);this.aj()}else this.parent&&this.parent.toFront(this)};b.toBack=function(a){if(a){for(var b=0,c=this.L.length;c--;)if(this.L[c]==a){b=c;break}jbeeb.Utils.arrayMove(this.L,b,0);this.aj()}else this.parent&&this.parent.toBack(this)};b.by=b.init;b.init=function(a){this.by(a);if(a)this.stage=this.amStage==1?this:this.stage,this.L=[]};b.av=b.stretch;b.stretch=function(a,b){var c=a,e=b,f=this.flex;f&&(f.match(/w/)||(c=1),f.match(/h/)||(e=1));for(f=this.L.length;f--;){var d=this.L[f];d&&d.stretch(c,e)}this.av(a,b)};b.aa=b.setFlex;b.setFlex=function(a){for(var b=this.L.length;b--;)this.L[b].setFlex(a);this.aa(a)};b.ay=b.destroy;b.destroy=function(){if(this.L)for(var a=this.L.length;a--;)this.L[a]&&(this.L[a].destroy(),this.removeChild(this.L[a]),this.L[a]=null);this.L=null;this.ay()};b.destroyChildren=function(){if(this.L)for(var a=this.L.length;a--;)this.L[a]&&(this.L[a].destroy(),this.removeChild(this.L[a]),this.L[a]=null);this.L.length=0;this.L=null;this.L=[]};b.getChildren=function(){return this.L};b.toString=function(){return "[Container (name="+this.name+")]"};b.type="Container";jbeeb.Container=d})();this.jbeeb=this.jbeeb||{};(function(){var d=function(a){this.bL(a);return this},b=d.prototype=new jbeeb.Container;b.amReady=null;b.H=null;b.bL=function(a){if(a){this.amReady=0;if(a.onReady)this.H=[],this.H.push(a.onReady);this.id=jbeeb.getUID();if(a.stage)this.amStage=0,this.aP(a);else{this.amStage=1;this.parent=this;this.stage=this;var b=a.target,c=null,e=0;if(b)(c=typeof b=="string"?document.getElementById(b):b)?c.nodeType===1?(this.element=document.createElement("div"),this.element.id=this.id,c.appendChild(this.element)):e=1:e=1;if(!b||e)document.write('<div id="'+this.id+'"></div>'),this.element=document.getElementById(this.id);a.element=this.element;this.aP(a);this.style=this.element.style;this.style.position="relative";this.style.display=a.inline===true||a.inline=="true"||a.inline===1?"inline-block":"block";this.style.verticalAlign="top";this.style.clear="both";this.style.zoom=1;this.setSize(this.width||a.w||1,this.height||a.h||1);this.setOverflow(a.overflow||"visible");this.setCursor("default")}jbeeb.register(this)}};b.aP=b.init;b.init=function(){var a=jbeeb.Utils.getXYWH(this.element);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;setTimeout(this.bS.bind(this),50)};b.bS=function(){this.amReady=1;if(this.H)for(var a=0;a<this.H.length;a++)this.H.pop()()};b.onReady=function(a){if(this.amReady)a();else{if(!this.H)this.H=[];this.H.push(a)}};b.toString=function(){return "[Stage (name="+this.name+")]"};b.type="Stage";jbeeb.Stage=d})();(function(){var d=function(a){this.imageFolder=CountdownImageFolder;this.imageBasename=CountdownImageBasename;this.imageExt=CountdownImageExt;this.imagePhysicalWidth=CountdownImagePhysicalWidth;this.imagePhysicalHeight=CountdownImagePhysicalHeight;this.totalFlipDigits=2;this.ac=a||{};var b,c,e,f;if(a.bkgd){var d=a.bkgd;if(d.color)b=d.color;d.stroke&&d.strokeColor&&(c={weight:d.stroke||1,color:d.strokeColor,alpha:d.strokeAlpha});if(d.shadow)e=d.shadow;if(d.rounded)f=d.rounded}this.bF=new jbeeb.Stage({target:a.target,inline:a.inline||false,w:a.width||CountdownWidth,h:a.height||CountdownHeight,rounded:f||null,fill:b||null,stroke:c||null,shadow:e||null});jbeeb.register(this)},b=d.prototype;b.ac=null;b.bF=null;b.aJ=false;b.ao=null;b.id=null;b.bB=false;b.O=null;b.J=null;b.totalFlipDigits=null;b.imageFolder=null;b.imageBasename="flipper";b.imageExt="png";b.bb=null;b.am=null;b.bh="second";b.aU=864E5;b.aw=false;b.bI=null;b.aY=0;b.bm=0;b.ar=0;b.bv=0;b.ax=[];b.bJ={};b.bk=0;b.init=function(){this.id=jbeeb.getUID();var a=this.ac;this.bB=this.aJ=false;this.O=new Date;this.J=a.style||"boring";this.width=a.width||CountdownWidth;this.height=a.height||CountdownHeight;this.ao=a.onComplete;this.aw=a.hideLabels;this.bI=a.labelText||CountdownLabels;this.bk=a.offset||0;var b=new Date;if(this.J=="flip"){this.imageFolder.substr(-1)!="/"&&(this.imageFolder+="/");var c=this.imageFolder+this.imageBasename}this.am={second:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]},minute:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]},hour:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]},day:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]},month:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]},year:{use:false,prev:[null,null],ani:[null,null],aniCount:[null,null]}};if(a.time)this.O.setTime((b.getTime()/1E3+parseInt(a.time)+1)*1E3);else{var e=a.year?parseInt(a.year):b.getFullYear(),d=a.month?parseInt(a.month)-1:0,h=a.day?parseInt(a.day):0,b=a.hour?parseInt(a.hour):0,j=a.minute?parseInt(a.minute):0,i=a.second?parseInt(a.second):0,k=(a.ampm?a.ampm:"am").toLowerCase();b<12&&/p/.test(k)&&(b+=12);this.O=new Date(e,d,h,b,j,i);d=new Date;d.getHours();e=0;b>d.getHours()&&(e+=this.aU);b=(new Date(d.getFullYear(),0,1)).getTimezoneOffset();d=(new Date(d.getFullYear(),6,1)).getTimezoneOffset();this.O.getTimezoneOffset()<(b>d?b:d)&&(e+=36E5);this.bk!=0&&(e+=this.bk*36E5);if(e!=0)b=this.O.getTime()+e,this.O=new Date(b)}b="second,minute,hour,day,month,year".split(",");j=a.rangeLo?a.rangeLo:"second";i=a.rangeHi?a.rangeHi:"year";j=j.substr(-1)=="s"?j.substr(0,j.length):j;i=i.substr(-1)=="s"?i.substr(0,i.length):i;for(e=0;e<b.length;e++)d=b[e],d==j&&(j=e),d==i&&(i=e);for(e=0;e<b.length;e++)if(e>=j&&e<=i)d=b[e],this.am[d].use=true,this.bh=d;d=a.padding===0?0:a.padding?a.padding:this.J=="flip"?0:0.8;this.J=="flip"&&(d/=2);var h=this.height,j=this.width/(i-j+1),i=this.aw?0:j*0.25,k=j*0.1,n=j-k,q=h-i,s=n*d;this.J=="flip"&&(s=n*(d/this.totalFlipDigits));var t=n-s,m=this.height-i*2;this.bm=n/this.totalFlipDigits;this.ar=k;var l=0;this.J=="flip"&&(m=this.height-i,l=h*0.03);this.aY=n;this.bm=t*this.totalFlipDigits;this.ar=k;this.bv=s/2/this.totalFlipDigits/2;var p={font:"Arial, _sans",color:"#FFFFFF",weight:"normal",bkgd:this.J=="flip"?null:{color:["#000000",1,0,"#686868",1,50,"#000000",1,50,"#535050",1,100],alpha:"v"},rounded:this.J=="flip"?null:0.18,shadow:null},u={font:"Arial, _sans",color:"#303030",weight:"bold"};if(a.numbers)for(var r in p)a.numbers[r]&&(p[r]=a.numbers[r]);if(a.labels)for(r in u)a.labels[r]&&(u[r]=a.labels[r]);b.reverse();this.bb={};this.ax=[];for(e=r=0;e<b.length;e++){var x=b[e];if(this.am[x].use){this.bb[x]=new jbeeb.Container({x:r+k/2,y:0,w:n,h:q,rounded:p.rounded||null,fill:jbeeb.Utils.clone(p.bkgd)||null,shadow:p.shadow||null});var o=this.bb[x];o.store={name:x};this.bJ[x]=n;if(this.J=="flip"){var v=this.imagePhysicalWidth*((t-l*2-s*2)/this.totalFlipDigits/this.imagePhysicalWidth),w=this.imagePhysicalHeight*(m/this.imagePhysicalHeight);o.time=new jbeeb.Container({x:0,y:0,w:v*this.totalFlipDigits,h:w});for(var y=[],z=0;z<this.totalFlipDigits;z++){for(var A=new jbeeb.Container({x:v*z+l*z,y:0,w:v,h:w}),E=[],B=0;B<10;B++){for(var C=new jbeeb.Container({x:0,y:0,w:v,h:w}),F=[],D=0;D<3;D++){var G=new jbeeb.Box({x:0,y:0,w:v,h:w,image:{url:c+(""+B+""+D)+"."+this.imageExt,mode:"fit"}});F[D]=G;C.addChild(G)}C.img=F;E[B]=C;A.addChild(C)}A.num=E;y[z]=A;o.time.addChild(A)}o.time.slot=y;o.addChild(o.time)}else o.time=new jbeeb.TextBox({x:0,y:0,w:n,h:q,text:"00",textScale:d,font:p.font,textColor:p.color,align:"center"}),o.addChild(o.time),o.line=new jbeeb.Box({x:0,y:0,w:n,h:h*0.03,fill:"#000000"}),o.addChild(o.line),o.line.center();this.bF.addChild(o);if(!this.aw)o.labels=new jbeeb.TextBox({x:r,y:h-i*0.7,w:j,h:i*0.7,font:u.font,testScale:0.7,textColor:u.color,bold:1,align:"center",text:this.bI[x]}),this.bF.addChild(o.labels);this.ax.push(o);o.time.center();a.numberMarginTop&&o.time.setY(a.numberMarginTop);r+=j}}this.bB=true;jbeeb.ticker.addEventListener("tick",this.tick,this)};b.aT=function(){this.ao&&this.ao()};b.bu=function(a){return a.toString().length*this.bm};b.aX=function(){for(var a=false,b=0;b<this.ax.length;b++){var c=this.ax[b],e=c.store.name,d=c.time.text,d=this.bu(d);d>=this.aY&&d!=this.bJ[e]&&(c.setWidth(d+this.bv),this.bJ[e]=d+this.bv,a=true)}if(a)for(b=a=0;b<this.ax.length;b++)c=this.ax[b],d=c.time.text,this.bu(d),c.setX(a),c.time.setWidth(c.width),c.time.center(),c.labels&&(c.labels.setX(a),c.labels.setWidth(c.width)),c.line&&(c.line.setWidth(c.width),c.line.center()),a+=c.width+this.ar};b.bw=function(){var a,b,c,e,f,h,j=new Date,i=this.O.getTime()-j.getTime(),k=this.bb;i>0?(a=i/1E3,b=a/60,c=b/60,f=this.bh,a=f=="second"?Math.round(a):Math.floor(a%60),b=f=="minute"?Math.round(b):Math.floor(b%60),c=f=="hour"?Math.round(c):Math.floor(c%24),h=d.YMDcalc(j.getFullYear(),j.getMonth(),j.getDate(),this.O.getFullYear(),this.O.getMonth(),this.O.getDate()),e=f=="day"?Math.round((i-this.aU)/this.aU):h.d,f=f=="month"?this.bQ(j,this.O):h.m,h=h.y,a<10&&(a="0"+a),b<10&&(b="0"+b),c<10&&(c="0"+c),e<10&&(e="0"+e),f<10&&(f="0"+f),h<10&&(h="0"+h)):this.aJ||(h=f=e=c=b=a="00");this.J=="flip"?(k.year&&this.as("year",h),k.month&&this.as("month",f),k.day&&this.as("day",e),k.hour&&this.as("hour",c),k.minute&&this.as("minute",b),k.second&&this.as("second",a)):(k.year&&k.year.time.setText(h),k.month&&k.month.time.setText(f),k.day&&k.day.time.setText(e),k.hour&&k.hour.time.setText(c),k.minute&&k.minute.time.setText(b),k.second&&k.second.time.setText(a),this.aX());this.aJ==true&&this.aT()};b.as=function(a,b){for(var c=0;c<this.totalFlipDigits;c++){var e=this.bb[a].time.slot[c],d=this.am[a],h=String(b).substr(c,1),j=e.num[h];if(j){if(d.prev[c]!=h){for(var i=0;i<10;i++)e.num[i].hide();j.show();d.ani[c]=true;d.aniCount[c]=0}if(d.ani[c]){for(i=0;i<3;i++)j.img[i].hide();this.aJ?j.img[2].show():(j.img[d.aniCount[c]].show(),d.aniCount[c]++,d.aniCount[c]>2&&(d.ani[c]=false))}d.prev[c]=h}}};b.tick=function(){this.bB===true&&this.bw()};b.bQ=function(a,b){var c=(b.getFullYear()-a.getFullYear())*12;c-=a.getMonth();c+=b.getMonth();b.getDate()-a.getDate()+1<=0&&c--;return c<=0?0:c};d.YMDcalc=function(a,b,c,e,d,h){var j=[31,28,31,30,31,30,31,31,30,31,30,31];j[1]=a%400==0||a%4==0&&a%100!=0?29:28;b+=1;d+=1;var i=c+1,c=h-i;c<=0&&(c=j[b-1]-i+h,d--);d<0&&(d+=12,e--);h=d-b;h<0&&(h+=12,e--);return{y:e-a,m:h,d:c}};window.Countdown=d})(); 